"use strict";!function(t,e,i){var s=[],a={},o=void 0,n=void 0,r=function(t){t.matches?h.each(s,function(e){e.hasMediaQueries()&&(o&&clearTimeout(o),n&&clearTimeout(n),o=setTimeout(function(){e.changeMedia(t.media),o=null,n=null},10))}):o||(n&&clearTimeout(n),n=setTimeout(function(){h.each(s,function(t){t.hasMediaQueries()&&t.changeMedia()}),o=null,n=null},10))},c=(t.console.log,"ontouchstart"in t||i.maxTouchPoints>0||i.msMaxTouchPoints>0),h=function(){var i=this;return{getByClass:function(t,e,i){var s=t.getElementsByClassName(e);return i&&s.length?s[0]:s.length&&s||void 0},getByTag:function(t,e,i){var s=t.getElementsByTagName(e);return i&&s&&s.length?s[0]:s},mkel:function(t,i){var s=e.createElement(t);if(i)for(var a=Object.keys(i),o=0;o<a.length;o++)s.setAttribute(a[o],i[a[o]]);return s},each:function(t,e){for(var s=void 0,a=0;a<t.length&&(s=e.call(i,t[a]),s!==!1);a++);},addMediaQuery:function(e){a[e]||(a[e]=!0,t.matchMedia(e).addListener(r))}}}();c&&h.getByTag(e,"html",!0).classList.add("carousel-istouch");var d=function t(e){var i=this;this.config={delay:8e3,transition:"slide",touchthreshold:40},s.push(this),this.element=e,this.useIndicators=void 0!==e.dataset.carouselIndicators,this.indicators=[],this.slider=h.getByClass(e,"carousel-slider",!0),this.items=[],this.ivalId=null,this.currPos=0,this._hasmedia=-1;var a=h.getByClass(this.slider,"carousel-item"),o=0;h.each(a,function(e){i.items.push(new t.Item(e,(o++)))}),e.dataset.carouselDelay&&(this.config.delay=parseInt(e.dataset.carouselDelay,10)),e.dataset.carouselTransition&&(this.config.transition=e.dataset.carouselTransition),this.items.length&&this.items[0].load(),this.items.length>1&&(this.items[1].load(),this._makeIndicators()),c&&this._setupTouchEvents(),this.play()};d.prototype.play=function(){this.ivalId&&clearTimeout(this.ivalId);var t=this;this.ivalId=setTimeout(function(){t.next(),t.play()},this.config.delay)},d.prototype.pause=function(){clearTimeout(this.ivalId),this.slider.classList.remove("animate")},d.prototype.next=function(){this.currPos+=1,this.currPos>=this.items.length?this.currPos=0:this._loadIfNecessary(this.currPos+1),this.goto(this.currPos)},d.prototype.goto=function(t){t<0?t=this.items.length-1:t>=this.items.length&&(t=0),clearTimeout(this.ivalId),this.slider.classList.add("animate"),this._loadIfNecessary(t),this.setIndicator(t),this.slider.dataset.carouselPos=t,this.currPos=t,this.play()},d.prototype.hasMediaQueries=function(){var t=this;return this._hasmedia!==-1?!!this._hasmedia:(h.each(this.items,function(e){if(e.hasMediaQueries)return t._hasmedia=1,!1}),this._hasmedia===-1&&(this._hasmedia=0),!!this._hasmedia)},d.prototype.changeMedia=function(t){h.each(this.items,function(e){e.hasMediaQueries&&e.changeMedia(t)})},d.prototype._loadIfNecessary=function(t){t>=0&&t<this.items.length&&(this.items[t].isLoaded||this.items[t].load())},d.prototype._setupTouchEvents=function(){var t={x:0,y:0,startX:0},e=this,i=function(t){return t.changedTouches[0]},s=this.slider,a=!1;s.addEventListener("touchstart",function(s){var a=i(s);t.x=a.clientX,t.y=a.clientY,t.startX=a.clientX,e.pause()},!1),s.addEventListener("touchend",function(o){if(a)return void(a=!1);var n=i(o),r=void 0,c=n.clientX-t.x;return Math.abs(c)<e.config.touchthreshold?void s.style.removeProperty("left"):(n.clientX<t.x?(r=e.currPos+1,r>=e.items.length&&(r=0)):n.clientX>t.x&&(r=e.currPos-1,r<0&&(r=e.items.length-1)),void(void 0!==r?(s.style.removeProperty("left"),e.goto(r)):e.play()))},!1),s.addEventListener("touchcancel",function(){s.style.removeProperty("left"),e.goto(e.currPos)},!1);var o=function o(r){var c=i(r),h=c.clientX-t.x,d=c.clientX-t.startX,l=s.offsetLeft;t.x=c.clientX;var u=l+h/2;return Math.abs(d)>e.config.touchthreshold?(r.preventDefault(),a=!0,s.style.removeProperty("left"),s.removeEventListener("touchmove",o,!1),h>0?(e._loadIfNecessary(e.currPos-1),e.goto(e.currPos-1)):h<0&&(e._loadIfNecessary(e.currPos+1),e.goto(e.currPos+1)),setTimeout(function(){n()},600),!1):void(s.style.left=u+"px")},n=function(){s.addEventListener("touchmove",o,!1)};n()},d.prototype._makeIndicators=function(){var t=this;if(this.useIndicators&&!(this.items.length<2)){var e=h.getByClass(this.element,"carousel-indicators",!0),i=[];e||(e=h.mkel("div",{class:"carousel-indicators"})),this.items.forEach(function(){var s=new d.Indicator(t,i.length);e.appendChild(s.btn),i.push(s)}),i[0].activate(),this.element.appendChild(e),this.indicators=i}},d.prototype.setIndicator=function(t){!this.useIndicators||this.items.length<2||(void 0===t&&(t=this.currPos),this.currPos=t,this.indicators.forEach(function(t){t.deActivate()}),this.indicators[t].activate())},d.Item=function(i,s){var a=this;this.mediaQueries={},this.hasMediaQueries=!1,this.img=h.getByTag(i,"img",!0),this.element=i,this.isLoaded=!1,this.src=null,this.defaultSrc=this.img.dataset.carouselSrc,this.mediaSizes=null,this.href=i.dataset.carouselHref,this.position=s,this.element.setAttribute("data-carousel-position",s),this.href&&i.addEventListener("click",function(t){t.preventDefault(),e.location.href=a.href},!0),this._collectMediaSizes();for(var o=Object.keys(this.mediaQueries).sort(),n=void 0,r=0;r<o.length;r++)n=o[r],t.matchMedia(n).matches&&(this.src=this.mediaQueries[n]);this.src||(this.src=this.img.dataset.carouselSrc),this.img.style.display="none"},d.Item.prototype.changeMedia=function(t){var e=this.mediaQueries[t];this.src=e||this.defaultSrc,this.isLoaded&&this.load()},d.Item.prototype._collectMediaSizes=function(){var t=void 0,e=[],i={};for(var s in this.img.dataset)t=s.match(/Mq-(\d+)$/),t&&(this.hasMediaQueries=!0,t=parseInt(t[1]),e.push(t),i[t]=this.img.dataset[s]);var a=e.length;if(a){var o=void 0,n=void 0;e.sort();for(var r=0;r<a;r++)o=e[r],n="(min-width: "+(o+1)+"px)",this.mediaQueries[n]=i[o],h.addMediaQuery(n);this.mediaSizes=e}},d.Item.prototype.load=function(){this._setSrc(this.src)},d.Item.prototype._setSrc=function(t){var e=this;this.img.setAttribute("src",t),this.img.onload=function(){e.element.style.backgroundImage="url("+t+")",e.isLoaded=!0}},d.Indicator=function(t,e){var i=this;this.index=e,this.owner=t,this.btn=h.mkel("a",{class:"carousel-indicator",href:"#carousel-"+e}),this.btn.appendChild(h.mkel("span",{class:"carousel-indicator-inner"})),this.btn.addEventListener("click",function(t){return t.preventDefault(),i.owner.goto(i.index),!1},!0)},d.Indicator.prototype.activate=function(){this.btn.classList.add("carousel-indicator-active")},d.Indicator.prototype.deActivate=function(){this.btn.classList.remove("carousel-indicator-active")},t.addEventListener("DOMContentLoaded",function(){var t=h.getByClass(e,"carousel");t&&t.length&&h.each(t,function(t){new d(t)})})}(window,document,window.navigator);