"use strict";!function(t,i,e){var s=[],a={},n=void 0,o=void 0,r=function(t){t.matches?(h(">>> Media change: ",t.media),d.each(s,function(i){i.hasMediaQueries()&&(n&&clearTimeout(n),o&&clearTimeout(o),n=setTimeout(function(){i.changeMedia(t.media),n=null,o=null},10))})):n||(o&&clearTimeout(o),o=setTimeout(function(){d.each(s,function(t){t.hasMediaQueries()&&t.changeMedia()}),n=null,o=null},10))},h=t.console.log,c="ontouchstart"in t||e.maxTouchPoints>0||e.msMaxTouchPoints>0,d=function(){var e=this;return{getByClass:function(t,i,e){var s=t.getElementsByClassName(i);return e&&s.length?s[0]:s.length&&s||void 0},getByTag:function(t,i,e){var s=t.getElementsByTagName(i);return e&&s&&s.length?s[0]:s},mkel:function(t,e){var s=i.createElement(t);if(e)for(var a=Object.keys(e),n=0;n<a.length;n++)s.setAttribute(a[n],e[a[n]]);return s},each:function(t,i){for(var s=void 0,a=0;a<t.length&&(s=i.call(e,t[a]),s!==!1);a++);},addMediaQuery:function(i){a[i]||(a[i]=!0,t.matchMedia(i).addListener(r))}}}();c&&d.getByTag(i,"html",!0).classList.add("carousel-istouch");var l=function t(i){var e=this;this.config={delay:8e3,transition:"slide"},s.push(this),this.element=i,this.useIndicators=void 0!==i.dataset.carouselIndicators,this.indicators=[],this.slider=d.getByClass(i,"carousel-slider",!0),this.items=[],this.ivalId=null,this.currPos=0,this._hasmedia=-1;var a=d.getByClass(this.slider,"carousel-item");d.each(a,function(i){e.items.push(new t.Item(i))}),i.dataset.carouselDelay&&(this.config.delay=parseInt(i.dataset.carouselDelay,10)),i.dataset.carouselTransition&&(this.config.transition=i.dataset.carouselTransition),this.items.length&&this.items[0].load(),this.items.length>1&&(this.items[1].load(),this._makeIndicators()),this.play()};l.prototype.play=function(){this.ivalId&&clearTimeout(this.ivalId);var t=this;this.ivalId=setTimeout(function(){t.next(),t.play()},this.config.delay)},l.prototype.next=function(){this.currPos+=1,this.currPos>=this.items.length?this.currPos=0:this._loadIfNecessary(this.currPos+1),this.goto(this.currPos)},l.prototype.goto=function(t){t<0||t>=this.items.length||(clearTimeout(this.ivalId),this._loadIfNecessary(t),this.setIndicator(t),this.slider.dataset.carouselPos=t,this.currPos=t,this.play())},l.prototype.hasMediaQueries=function(){var t=this;return this._hasmedia!==-1?!!this._hasmedia:(d.each(this.items,function(i){if(i.hasMediaQueries)return t._hasmedia=1,!1}),this._hasmedia===-1&&(this._hasmedia=0),!!this._hasmedia)},l.prototype.changeMedia=function(t){h("Carousel.changeMedia(",t,")"),d.each(this.items,function(i){i.hasMediaQueries&&i.changeMedia(t)})},l.prototype._loadIfNecessary=function(t){t>=0&&t<this.items.length&&(this.items[t].isLoaded||this.items[t].load())},l.prototype._makeIndicators=function(){var t=this;if(this.useIndicators&&!(this.items.length<2)){var i=d.getByClass(this.element,"carousel-indicators",!0),e=[];i||(i=d.mkel("div",{class:"carousel-indicators"})),this.items.forEach(function(){var s=new l.Indicator(t,e.length);i.appendChild(s.btn),e.push(s)}),e[0].activate(),this.element.appendChild(i),this.indicators=e}},l.prototype.setIndicator=function(t){!this.useIndicators||this.items.length<2||(void 0===t&&(t=this.currPos),this.currPos=t,this.indicators.forEach(function(t){t.deActivate()}),this.indicators[t].activate())},l.Item=function(e){var s=this;this.mediaQueries={},this.hasMediaQueries=!1,this.img=d.getByTag(e,"img",!0),this.element=e,this.isLoaded=!1,this.src=null,this.defaultSrc=this.img.dataset.carouselSrc,this.mediaSizes=null,this.href=e.dataset.carouselHref,this.href&&e.addEventListener("click",function(t){t.preventDefault(),i.location.href=s.href},!0),this._collectMediaSizes();for(var a=Object.keys(this.mediaQueries).sort(),n=void 0,o=0;o<a.length;o++)n=a[o],t.matchMedia(n).matches&&(this.src=this.mediaQueries[n]);this.src||(this.src=this.img.dataset.carouselSrc),this.img.style.display="none"},l.Item.prototype.changeMedia=function(t){var i=this.mediaQueries[t];this.src=i||this.defaultSrc,this.isLoaded&&this.load()},l.Item.prototype._collectMediaSizes=function(){var t=void 0,i=[],e={};for(var s in this.img.dataset)t=s.match(/Mq-(\d+)$/),t&&(this.hasMediaQueries=!0,t=parseInt(t[1]),i.push(t),e[t]=this.img.dataset[s]);var a=i.length;if(a){var n=void 0,o=void 0;i.sort();for(var r=0;r<a;r++)n=i[r],o="(min-width: "+(n+1)+"px)",this.mediaQueries[o]=e[n],d.addMediaQuery(o);this.mediaSizes=i}},l.Item.prototype.load=function(){this._setSrc(this.src)},l.Item.prototype._setSrc=function(t){var i=this;this.img.setAttribute("src",t),this.img.onload=function(){i.element.style.backgroundImage="url("+t+")",i.isLoaded=!0}},l.Indicator=function(t,i){var e=this;this.index=i,this.owner=t,this.btn=d.mkel("a",{class:"carousel-indicator",href:"#carousel-"+i}),this.btn.appendChild(d.mkel("span",{class:"carousel-indicator-inner"})),this.btn.addEventListener("click",function(t){return t.preventDefault(),e.owner.goto(e.index),!1},!0)},l.Indicator.prototype.activate=function(){this.btn.classList.add("carousel-indicator-active")},l.Indicator.prototype.deActivate=function(){this.btn.classList.remove("carousel-indicator-active")},t.addEventListener("DOMContentLoaded",function(){var t=d.getByClass(i,"carousel");t.length&&d.each(t,function(t){new l(t)})})}(window,document,window.navigator);